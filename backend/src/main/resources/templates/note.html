<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<layout th:replace="fragments/basic_layout :: application_layout(~{ :: .content})">
    <div class="container content">
        <div th:replace="fragments/note_fragments :: noteBreadcrumb(${note}, ~{:: .additional-item})">
            <li class="breadcrumb-item additional-item" th:text="${note.title}"/>
            <li class="breadcrumb-item additional-item">
                <a class="text-secondary" th:href="@{/notes/{id}/new(id=${note.id})}">(Add Child Note)</a>
            </li>
        </div>

        <div th:if="${note.parentNote}">
            <svg th:replace="fragments/svgs :: downRight"/>
            <a th:if="${note.parentNote}" th:href="@{/notes/{id}/new(id=${note.parentNote.id})}">Add Sibling
                Note</a>
        </div>
        <div class="jumbotron py-4 mb-2">
            <nav class="nav d-flex flex-row-reverse p-0">
                <div th:replace="fragments/note_fragments :: noteButtons(${note})"/>
            </nav>
            <h2 class="display-4" th:text="${note.title}"/>
            <p th:each="line : ${noteDecorated.descriptionLines}" th:text="${line}"/>
            <div th:if="${note.url}">
                <label th:unless="${note.urlIsVideo}">Url:</label>
                <label th:if="${note.urlIsVideo}">Video Url:</label>
                <p th:text="${note.url}"/>
            </div>
            <p class="text-center" th:if="${note.picture}">
                <img class="img-fluid" th:src="${note.picture}"/>
            </p>
        </div>

        <nav class="nav d-flex flex-row-reverse p-0 mb-2">
            <div th:fragment="noteButtons(note)" class="btn-group btn-group-sm">
                <a role="button" class="btn btn-sm" title="previous sibling" th:if="${noteDecorated.previousSiblingNote}" th:href="@{/notes/{id}(id=${noteDecorated.previousSiblingNote.id})}">
                    <<
                </a>
                <a role="button" class="btn btn-sm" title="previous" th:if="${noteDecorated.previousNote}" th:href="@{/notes/{id}(id=${noteDecorated.previousNote.id})}">
                    <
                </a>
                <a role="button" class="btn btn-lg" title="next" th:if="${noteDecorated.nextNote}" th:href="@{/notes/{id}(id=${noteDecorated.nextNote.id})}">
                    >
                </a>
                <a role="button" class="btn btn-sm" title="next sibling" th:if="${noteDecorated.nextSiblingNote}" th:href="@{/notes/{id}(id=${noteDecorated.nextSiblingNote.id})}">
                    >>
                </a>
            </div>
        </nav>

        <div th:replace="fragments/note_fragments :: noteViewCards(${note.children})"/>
    </div>
</layout>